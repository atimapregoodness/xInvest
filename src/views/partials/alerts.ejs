<!-- Flash Messages Container -->
<div class="flash-messages-container" id="flashMessages">
  <% if (success_msg && success_msg.length > 0) { %>
  <div class="flash-message success">
    <div class="flash-icon success">
      <i class="fa-solid fa-circle-check"></i>
    </div>
    <div class="flash-content">
      <div class="flash-title">Success</div>
      <div class="flash-text"><%= success_msg %></div>
    </div>
    <button type="button" class="flash-close">
      <i class="fa-solid fa-xmark"></i>
    </button>
    <div class="flash-progress"></div>
  </div>
  <% } %> <% if (error_msg && error_msg.length > 0) { %>
  <div class="flash-message error">
    <div class="flash-icon error">
      <i class="fa-solid fa-circle-exclamation"></i>
    </div>
    <div class="flash-content">
      <div class="flash-title">Error</div>
      <div class="flash-text"><%= error_msg %></div>
    </div>
    <button type="button" class="flash-close">
      <i class="fa-solid fa-xmark"></i>
    </button>
    <div class="flash-progress"></div>
  </div>
  <% } %>
</div>

<script>
  // Flash Messages Functionality
  document.addEventListener("DOMContentLoaded", function () {
    const flashMessages = document.querySelectorAll(".flash-message");

    // Show messages with animation
    flashMessages.forEach((message, index) => {
      setTimeout(() => {
        message.classList.add("show");
      }, 100 * index);

      // Auto-remove after 5 seconds
      setTimeout(() => {
        if (message.classList.contains("show")) {
          dismissMessage(message);
        }
      }, 5000);

      // Close button functionality
      const closeBtn = message.querySelector(".flash-close");
      closeBtn.addEventListener("click", () => {
        dismissMessage(message);
      });
    });

    function dismissMessage(message) {
      message.classList.remove("show");
      message.classList.add("hide");

      // Remove from DOM after animation completes
      setTimeout(() => {
        if (message.parentNode) {
          message.parentNode.removeChild(message);
        }
      }, 500);
    }

    // Add click anywhere to dismiss functionality
    document.addEventListener("click", function (e) {
      if (!e.target.closest(".flash-message") && flashMessages.length > 0) {
        flashMessages.forEach((message) => {
          if (message.classList.contains("show")) {
            dismissMessage(message);
          }
        });
      }
    });
  });
</script>
