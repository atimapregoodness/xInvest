<!-- ===================== NAVBAR ===================== -->
<nav class="navbar navbar-expand-lg fixed-top glass-nav py-2">
  <div class="container d-flex align-items-center justify-content-between">
    <!-- Brand -->
    <a class="navbar-brand d-flex align-items-center" href="/">
      <i class="fas fa-chart-line text-accent me-2"></i>
      <span class="fw-bold text-white fs-5">xInvest</span>
    </a>

    <!-- Toggle -->
    <button
      class="navbar-toggler border-0 shadow-none"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <i class="fas fa-bars text-white fs-4"></i>
    </button>

    <!-- Nav Links -->
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav align-items-lg-center gap-lg-2 text-center">
        <li class="nav-item"><a class="nav-link" href="/">Home</a></li>

        <!-- Company -->
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            id="companyDropdown"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            Company
          </a>
          <ul class="dropdown-menu" aria-labelledby="companyDropdown">
            <li><a class="dropdown-item" href="/about">About Us</a></li>
            <li><a class="dropdown-item" href="/contact">Contact Us</a></li>
            <li><a class="dropdown-item" href="/careers">Careers</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/bots"> Auto Invest</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/faqs">FAQs</a>
        </li>

        <!-- Hidden Google Translate Element -->
        <div id="google_translate_element" style="display: none"></div>

        <!-- Account Dropdown -->
        <li class="nav-item dropdown mt-2 mt-lg-0" id="dropdown">
          <a
            class="btn dropdown-toggle px-3 py-1 d-flex align-items-center"
            href="#"
            id="accountDropdown"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <i class="fas fa-user-circle me-2"></i>
            Account
          </a>

          <ul
            class="dropdown-menu"
            aria-labelledby="accountDropdown"
            id="acctContents"
          >
            <% if (user) { %>
            <!-- User Profile Section -->
            <li class="px-3 py-2 text-center">
              <img
                src="<%= user.profileImage || '/images/default-avatar.png' %>"
                alt="Profile Image"
                class="rounded-circle mb-2"
                width="60"
                height="60"
              />
              <h6 class="mb-0"><%= user.fullName || 'John Doe' %></h6>
              <small class="text-muted"
                ><%= user.country || 'Unknown Country' %></small
              >
            </li>
            <li><hr class="dropdown-divider" /></li>

            <!-- Logged-in Options -->
            <li>
              <a class="dropdown-item" href="/dashboard">
                <i class="fas fa-user me-2 text-accent"></i>Dashboard
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="/auth/logout">
                <i class="fas fa-sign-out-alt me-2 text-accent"></i>Logout
              </a>
            </li>

            <% } else { %>
            <!-- Guest Options -->
            <li>
              <a class="dropdown-item" href="/auth/login">
                <i class="fas fa-sign-in-alt me-2 text-accent"></i>Login
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="/auth/register">
                <i class="fas fa-user-plus me-2 text-accent"></i>Register
              </a>
            </li>
            <% } %>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- ===================== SCRIPTS ===================== -->
<script>
  // NAVBAR SCROLL EFFECT
  document.addEventListener("DOMContentLoaded", () => {
    const navbar = document.querySelector(".glass-nav");
    window.addEventListener("scroll", () => {
      navbar.classList.toggle("scrolled", window.scrollY > 50);
    });
  });
</script>
